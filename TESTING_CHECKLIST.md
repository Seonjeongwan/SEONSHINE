# 메뉴 삭제 기능 테스트 체크리스트

## ✅ 정상 동작하는 부분

### 1. 메뉴 조회

- ✅ `getMenuList`: `is_deleted = false` 필터링 적용됨 (관리자 화면에서도 삭제된 메뉴는 보이지 않음)
- ✅ `getMenuListByCurrentDay`: `is_deleted = false` 필터링 적용됨
- ✅ 사용자 화면에서 삭제된 메뉴는 보이지 않음

### 2. 메뉴 삭제

- ✅ `deleteMenuItem`: `is_deleted = true`로 설정됨 (Soft delete)
- ✅ 외래키 제약조건 문제 해결됨 (주문 이력과의 관계 유지)

### 3. 주문 API 보안

- ✅ `orderItemCurrentDay`: `is_deleted = false` 필터링 적용됨
- ✅ 삭제된 메뉴는 주문할 수 없음 (프론트엔드 + API 레벨 모두 체크)

### 3. 주문 이력 조회

- ✅ `getCurrentOrder`: 삭제된 메뉴도 조회 가능 (이미 주문된 메뉴는 조회되어야 함)
- ✅ 주문 이력에서 메뉴 정보 정상 조회됨

---

## 🧪 테스트 시나리오

### 시나리오 1: 정상 삭제 및 조회

1. ✅ 메뉴 생성
2. ✅ 메뉴 목록에서 확인 (관리자 화면)
3. ✅ 메뉴 삭제 (`is_deleted = true`)
4. ✅ 메뉴 목록에서 사라졌는지 확인 (관리자 화면)
5. ✅ 사용자 주문 화면에서도 사라졌는지 확인

### 시나리오 2: 주문된 메뉴 삭제

1. ✅ 메뉴 생성
2. ✅ 메뉴 주문
3. ✅ 메뉴 삭제 (`is_deleted = true`)
4. ✅ 주문 이력에서 메뉴 정보가 정상 조회되는지 확인
5. ✅ 메뉴 목록에서는 사라졌는지 확인 (관리자/사용자 모두)

### 시나리오 3: 삭제된 메뉴 재주문 시도

1. ✅ 메뉴 생성
2. ✅ 메뉴 주문
3. ✅ 메뉴 삭제 (`is_deleted = true`)
4. ✅ **삭제된 메뉴 재주문 시도**
   - API 레벨에서 `is_deleted = false` 체크로 주문 실패해야 함
   - 에러 메시지: "Menu item not found or not available"

### 시나리오 4: 삭제된 메뉴로 새 주문 시도

1. ✅ 메뉴 생성
2. ✅ 메뉴 삭제 (`is_deleted = true`)
3. ✅ **삭제된 메뉴 주문 시도**
   - API 레벨에서 `is_deleted = false` 체크로 주문 실패해야 함
   - 에러 메시지: "Menu item not found or not available"

---

## 📋 전체 테스트 체크리스트

- [ ] 메뉴 생성 테스트
- [ ] 메뉴 목록 조회 테스트 (관리자 화면 - 삭제된 메뉴는 보이지 않아야 함)
- [ ] 메뉴 목록 조회 테스트 (사용자 주문 화면 - 삭제된 메뉴는 보이지 않아야 함)
- [ ] 메뉴 삭제 테스트 (`is_deleted = true`로 변경 확인)
- [ ] 삭제 후 메뉴 목록에서 사라졌는지 확인 (관리자/사용자 모두)
- [ ] 주문된 메뉴 삭제 테스트
- [ ] 주문 이력에서 삭제된 메뉴 정보 조회 테스트 (정상 조회되어야 함)
- [ ] 삭제된 메뉴로 주문 시도 테스트 (에러 반환 확인)
- [ ] 직접 API 호출로 삭제된 메뉴 주문 시도 테스트 (보안 체크 확인)

---

## 🎯 구현 완료 사항

1. ✅ **주문 API 보안**: `is_deleted = false` 체크 추가 완료
2. ✅ **Soft Delete**: `is_deleted` 컬럼 사용 (DB에 이미 존재)
3. ✅ **모든 조회 API**: `is_deleted = false` 필터링 적용
4. ✅ **DB 마이그레이션 불필요**: 기존 `is_deleted` 컬럼 활용

## 📝 참고사항

- **관리자 화면**: 현재는 삭제된 메뉴도 보이지 않음 (`is_deleted = false` 필터링)
- **사용자 화면**: 삭제된 메뉴는 보이지 않음 (`is_deleted = false` 필터링)
- **주문 이력**: 삭제된 메뉴 정보도 정상 조회됨 (데이터 무결성 유지)
